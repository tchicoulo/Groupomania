{"version":3,"sources":["webpack:///./src/views/Profile.vue?8175","webpack:///./src/views/Profile.vue","webpack:///./src/views/Profile.vue?5937"],"names":["class","pseudo","id","admin","to","users","user","key","deleteUser","name","data","JSON","parse","localStorage","getItem","userId","token","components","HeaderHome","beforeMount","this","getUsers","methods","parsedUserId","a","delete","headers","Authorization","then","catch","error","console","log","response","get","results","render","__scopeId"],"mappings":"kHAAA,W,6JCCOA,MAAM,W,EAET,eAAqB,UAAjB,gBAAY,G,EAChB,eAA+B,UAA3B,0BAAsB,G,aAGrBA,MAAM,W,iBAEN,wB,6BAQMA,MAAM,kB,2IAhBnB,eA8BM,MA9BN,EA8BM,CA7BJ,eAAc,GACd,EACA,EACA,eAA6B,UAAzB,WAAQ,eAAG,EAAAC,QAAM,GACT,IAAF,EAAAC,I,iBAAV,eAAqC,OAAjB,OAAI,eAAG,EAAAA,IAAE,I,sBAC7B,eAuBM,MAvBN,EAuBM,CAtBoB,GAAL,EAAAC,O,iBAAnB,eAEC,G,MAF8BH,MAAM,aAAaI,GAAG,e,YAClD,iBAAoB,C,mCAER,GAAL,EAAAD,O,iBAAV,eAEK,OAFiB,4D,sBAGN,GAAL,EAAAA,O,iBAAX,eAeM,U,mBAdJ,eAaM,2BAbc,EAAAE,OAAK,SAAbC,G,wBAAZ,eAaM,OAbsBC,IAAKD,EAAKJ,I,CAEK,IAAPI,EAAKJ,I,iBAAvC,eAUM,MAVN,EAUM,CATJ,eAA0B,UAAtB,OAAI,eAAGI,EAAKJ,IAAE,GAClB,eAAkC,UAA9B,WAAQ,eAAGI,EAAKL,QAAM,GAEX,IAAPK,EAAKJ,I,iBADb,eAMS,U,MAJN,QAAK,mBAAE,EAAAM,WAAWF,EAAKJ,KACxBF,MAAM,eACP,cAED,gB,2HAaG,GACbS,KAAM,UACNC,KAFa,WAGX,MAAO,CACLL,MAAO,KACPJ,OAAQU,KAAKC,MAAMC,aAAaC,QAAQ,SAASb,OACjDC,GAAIS,KAAKC,MAAMC,aAAaC,QAAQ,SAASC,OAC7CC,MAAOL,KAAKC,MAAMC,aAAaC,QAAQ,SAASE,MAChDb,MAAOQ,KAAKC,MAAMC,aAAaC,QAAQ,SAASX,QAGpDc,WAAY,CACVC,aAAA,MAEFC,YAda,WAeXC,KAAKC,YAEPC,QAAS,CAEPd,WAFO,SAEIO,GAAQ,WACbQ,EAAeZ,KAAKC,MAAMG,GAC9B,EAAAS,EACGC,OADH,0CAC6CF,GAAgB,CACzDG,QAAS,CAAEC,cAAe,UAAF,OAAYP,KAAKJ,UAE1CY,MAAK,WACJ,EAAKP,cAENQ,OAAM,SAACC,GACNC,QAAQC,IAAIF,EAAMG,cAKxBZ,SAjBO,WAiBI,WACLL,EAAQL,KAAKC,MAAMC,aAAaC,QAAQ,SAASE,MAErD,EAAAQ,EACGU,IAAI,kCAAmC,CACtCR,QAAS,CAAEC,cAAe,UAAF,OAAYX,MAErCY,MAAK,SAACvB,GACL,EAAKA,MAAQA,EAAMK,KAAKyB,WAEzBN,OAAM,SAACC,GAAD,OAAWC,QAAQC,IAAIF,S,UC9EtC,EAAOM,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-1100e3b4.e6e5f7d6.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=00ec5407&lang=scss&scoped=true\"","<template>\r\n  <div class=\"Profile\">\r\n    <HeaderHome />\r\n    <h1>Page Profile</h1>\r\n    <h2>Informations du compte</h2>\r\n    <h3>Compte: {{ pseudo }}</h3>\r\n    <h3 v-if=\"id != 26\">Id: {{ id }}</h3>\r\n    <div class=\"content\">\r\n      <router-link v-if=\"admin == 0\" class=\"btn-delete\" to=\"/deleteuser\"\r\n        >Supprimer mon compte</router-link\r\n      >\r\n      <h2 v-if=\"admin == 1\">\r\n        Voulez-vous supprimer definitivement un utilisateur ?\r\n      </h2>\r\n      <div v-if=\"admin == 1\">\r\n        <div v-for=\"user in users\" :key=\"user.id\">\r\n          <!-- 26 est l'id du compte admin -->\r\n          <div class=\"container-user\" v-if=\"user.id != 26\">\r\n            <h3>Id: {{ user.id }}</h3>\r\n            <h3>Compte: {{ user.pseudo }}</h3>\r\n            <button\r\n              v-if=\"user.id != 26\"\r\n              @click=\"deleteUser(user.id)\"\r\n              class=\"delete-user\"\r\n            >\r\n              Supprimer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport HeaderHome from \"../components/HeaderHome\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  data() {\r\n    return {\r\n      users: null,\r\n      pseudo: JSON.parse(localStorage.getItem(\"user\")).pseudo,\r\n      id: JSON.parse(localStorage.getItem(\"user\")).userId,\r\n      token: JSON.parse(localStorage.getItem(\"user\")).token,\r\n      admin: JSON.parse(localStorage.getItem(\"user\")).admin,\r\n    };\r\n  },\r\n  components: {\r\n    HeaderHome,\r\n  },\r\n  beforeMount() {\r\n    this.getUsers();\r\n  },\r\n  methods: {\r\n    //Supprimer un utilisateur\r\n    deleteUser(userId) {\r\n      let parsedUserId = JSON.parse(userId);\r\n      axios\r\n        .delete(`http://localhost:3000/api/users/${parsedUserId}`, {\r\n          headers: { Authorization: `Bearer ${this.token}` },\r\n        })\r\n        .then(() => {\r\n          this.getUsers();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response);\r\n        });\r\n    },\r\n\r\n    //Afficher tous les utilisateurs (admin mode)\r\n    getUsers() {\r\n      let token = JSON.parse(localStorage.getItem(\"user\")).token;\r\n\r\n      axios\r\n        .get(\"http://localhost:3000/api/users\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((users) => {\r\n          this.users = users.data.results;\r\n        })\r\n        .catch((error) => console.log(error));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 100px;\r\n}\r\n\r\nh3,\r\nh2 {\r\n  text-align: center;\r\n}\r\n\r\n.content {\r\n  margin: 100px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.btn-delete {\r\n  text-decoration: none;\r\n  border: 3px solid var(--color-grey);\r\n  background-color: var(--color-red);\r\n  color: white;\r\n  width: 40%;\r\n  padding: 16px 32px;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-bottom: 20px;\r\n  transition-duration: 0.4s;\r\n  cursor: pointer;\r\n  border-radius: 10px;\r\n  &:hover {\r\n    border: 3px solid var(--color-blue);\r\n  }\r\n}\r\n.container-user {\r\n  margin: 40px 0;\r\n  border-radius: 5px;\r\n  width: 235px;\r\n  font-size: 12px;\r\n  background-color: var(--color-grey);\r\n  border: 1px solid black;\r\n  color: black;\r\n}\r\n\r\n.delete-user {\r\n  background-color: var(--color-blue);\r\n  color: white;\r\n  border-radius: 5px;\r\n  float: right;\r\n  &:hover {\r\n    border: 1px solid black;\r\n    background-color: red;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Profile.vue?vue&type=template&id=00ec5407&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=00ec5407&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-00ec5407\"\n\nexport default script"],"sourceRoot":""}